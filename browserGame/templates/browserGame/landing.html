{% extends 'base.html' %}
{% load render_bundle from webpack_loader %}
{% block content %}
{% if user.is_authenticated and character %}
  <div id="infoCharacter" style="text-align: center;" data="{{ page_data }}">
    {% render_bundle 'main' %}
  </div>
  <table class="action-table">
      <thead>
          <tr>
          <th colspan="3"><h2>ACCIONS</h2></th>
          </tr>
      </thead>
      <thead>
          <tr>
          <th>TIPUS</th>
          <th>OBJECTIU</th>
          <th>ATAC</th>
          </tr>
      </thead>
      <tbody>
          {% for action in actions %}
          <tr>
              <td>{{ action.action.category }}</td>
              <td>{{ action.target }}</td>
              <td>{{ action.action.name }}</td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
  <table class="ranking-table">
      <thead>
          <tr>
          <th colspan="3"><h2>RANKING</h2></th>
          </tr>
      </thead>
      <thead>
          <tr>
          <th>USUARI</th>
          <th>PERSONATGE</th>
          <th>NIVELL</th>
          </tr>
      </thead>
      <tbody>
          {% for character in characters %}
          <tr>
              <td>{{ character.user }}</td>
              <td>{{ character.nickname }}</td>
              <td>{{ character.level }}</td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
{% else %}
<table  class="infoSeason-table">
    <thead>
      <tr>
        <th colspan="2"><h2>TEMPORADA {{ season.id }}</h2></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>La temporada va començar</td>
        <td><strong>{{ season.game_datetime_starts }}</strong></td>
      </tr>
      <tr>
        <td>La temporada finalitza</td>
        <td><strong>{{ season.game_datetime_ends }}</strong></td>
      </tr>
      <tr>
        <td>Propera recàrrega de mana</td>
        <td><strong>{{ season.time_until_next_recharge }}</strong></td>
      </tr>
      <tr>
        <td colspan="2">QUÈ ESPEREU PER PARTICIPAR!</td>
      </tr>
    </tbody>
  </table>
{% endif %}
{% endblock %}